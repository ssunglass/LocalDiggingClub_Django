<!DOCTYPE html>
<html lang="ko">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" >

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="{% static 'js/carousel.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/blogList.css' %}">
    <link rel="stylesheet" href="{% static 'css/fontStyle.css' %}">
    <title>로컬디깅클럽</title>

</head>

<body>




 <div class="container column blog-base">


     <p class="mt-5"></p>

   <p class="title">로컬디깅클럽</p>


<div class="md-5">

  <div id="myCarousel" class="carousel slide" data-ride="carousel">

<div class="carousel-inner" role="listbox"  >
{% for blog in blogs %}

    {% if forloop.counter == 1 %}
    <div class="carousel-item active " style="cursor:pointer"
       onclick="location.href='{% url 'blogDetail' blog.id %}' ">
    {% else %}
    <div class="carousel-item" style="cursor:pointer"
       onclick="location.href='{% url 'blogDetail' blog.id %}' ">
    {% endif %}
        <img src="{{ blog.image.url }}" alt="Image">
  <div class=" carousel-caption bg-white" >
      <div class="brand-title">
    <h3 >{{ blog.brand }}</h3>
          </div>
      <div class="brand-location">
    <p>{{ blog.location }}</p>
          </div>
  </div>
    </div>
    {% endfor %}
</div>
    <!-- Left and right controls -->
   <a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </a>
  <a class="carousel-control-next" href="#myCarousel" data-slide="next">
    <span class="carousel-control-next-icon"></span>
  </a>
  </div>

      </div>

</div>
 </div>

<p class="mt-5"></p>

 <div class="container text-right">
  <div class="edit-page" >
    <a href="{% url 'createBlog' %}">
    <img src="{%static 'images/edit.png' %}">
        </a>

    </div>
   </div>





<!--
   <main role="main" class="container text-center">
       {% for blog in posts %}
       <hr>
       <div>
          <p><a class="blog-title" href="{% url 'blogDetail' blog.id %}" role="button">{{blog.title}}</a></p>

       </div>
        {% endfor %}

   <nav>
        <ul class="pagination">
       {% if posts.has_previous %}
        <li class="page-item">
            <a href="?page={{ posts.previous_page_number}}"><</a>
            </li>
         {% else %}
        <li class="page-item disabled">
                        <a class="page-link" href="#"><</a>
        </li>
        {% endif %}

           <span>{{ posts.number}}/{{ posts.paginator.num_pages }}</span>


        {% if posts.has_next %}
         <li>
          <a href="?page={{posts.next_page_number}}">></a>
        </li>
        {% else %}
        <li class="page-item disabled">
                        <a class="page-link" href="#">></a>
                    </li>
                    {% endif %}


            </ul>
        </nav>


   </main>

 -->
 <div id="blog-posts" class="container text-center">
     {% for blog in posts %}
     <hr>
     <div>
         <p><a class="blog-title" href="{% url 'blogDetail' blog.id %}" role="button">{{blog.title}}</a></p>

     </div>
     {% endfor %}
 </div>




<div class="container text-center paginator">
    <nav id="pagination">
        <ul class="pagination justify-content-center pagination-sm">
            {% if posts.has_previous %}
            <li class="page-item">
                <a class="page-link" href="{{ request.path }}?page={{ posts.previous_page_number }}"><</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true"><</a>
            </li>
            {% endif %}
            {% for i in posts.paginator.page_range %}
              {% if posts.number == i %}
               <li class="page-item active">
                 <a class="page-link" href="{{ request.path }}?page={{i}}">{{i}}</a>
               </li>
              {% else %}
              <li class="page-item">
                  <a class="page-link" href="{{ request.path }}?page={{i}}">{{i}}</a>
              </li>
              {% endif %}
            {% endfor %}
            {% if posts.has_next %}
            <li class="page-item">
                <a class="page-link" href="{{ request.path }}?page={{ posts.next_page_number }}">></a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">></a>
            </li>
            {% endif %}
        </ul>
    </nav>
</div>



<script type="text/javascript">
     function ajaxPagination() {
       $('#pagination a.page-link').each((index, el) => {
         $(el).click((e) => {
            e.preventDefault()
            let page_url = $(el).attr('href')

            $.ajax({
                url: page_url,
                type: 'GET',
                success: (data) => {
                   $('#blog-posts').empty()
                   $('#blog-posts').append( $(data).filter('#blog-posts').html() )
                   $('#pagination').empty()
                   $('#pagination').append( $(data).find('#pagination').html() )

                   }
                })
           })
      })
    }

    $(document).ready( function() {
       ajaxPagination()
       })
    $(document).ajaxStop( function() {
       ajaxPagination()

       })

</script>





</body>
</html>